{% extends 'base.html' %}

<link rel="stylesheet" type="text/css" href="static/css/bootstrap.min.css"/>

{% block title %} Home {% endblock title %}

{% block nav1link %}
    #events
{% endblock nav1link %}

{% block nav1 %}
    View Events
{% endblock nav1 %}

{% block nav2link %}

    {% if user.is_authenticated %}
        /profile
    {% else %}
        /signin
    {% endif %}

{% endblock nav2link %}

{% block nav2 %}
    {% if user.is_authenticated %}
        Hello, {{ user.first_name }}
    {% else %}
        Login
    {% endif %}
{% endblock nav2 %}

{% block nav3link %}

    {% if user.is_authenticated %}
        /contact
    {% else %}
        /contact
    {% endif %}

{% endblock nav3link %}

{% block nav3 %}

    {% if user.is_authenticated %}
        Participate
    {% else %}
        Participate
    {% endif %}

{% endblock nav3 %}

{% block nav4link %}

    {% if user.is_authenticated %}
        /logout
    {% endif %}

{% endblock nav4link %}

{% block nav4 %}

    {% if user.is_authenticated %}
        LogOut
    {% endif %}

{% endblock nav4 %}

{% block body %}
    <div style="background-color:lightblue;">
        <style>
            .carousel-inner {
                max-height: 650px;
            }

            .carousel-inner img {
                height: 100%;
                width: auto;
                object-fit: cover;
                object-position: center;
            }

            .carousel-caption {
                position: absolute;
                bottom: 10%; /* Adjust for optimal viewing */
                left: 50%;
                transform: translateX(-50%);
                background: rgba(0, 0, 0, 0.6); /* Slightly darker for better readability */
                color: white;
                padding: 1rem 2rem; /* More consistent padding */
                border-radius: 8px;
                font-size: 1.2rem; /* Default font size */
                text-align: center;
                z-index: 10;
                max-width: 80%; /* Prevent overly wide captions */
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Subtle shadow for emphasis */
            }

            /* Adjustments for smaller screens */
            @media (max-width: 576px) {
                .carousel-caption {
                    font-size: 1rem; /* Smaller font for phones */
                    padding: 0.8rem 1.5rem; /* Adjusted padding */
                }
            }

            /* Adjustments for larger screens */
            @media (min-width: 992px) {
                .carousel-caption {
                    font-size: 1.5rem; /* Larger font for desktops */
                    padding: 1.2rem 2.5rem; /* Spacious padding */
                }
            }

            .tab-pane {
                margin-bottom: 20px; /* Consistent spacing at the bottom of tabs */
            }
        </style>

        <!-- Carousel -->
        <div class="container-fluid px-0">
            <div id="carouselExampleControls" class="carousel slide" data-ride="carousel" data-interval="5000">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="/static/img/slide1.jpg" class="d-block w-100" alt="...">
                        <div class="carousel-caption">
                            <div class="carousel-text-wrapper">
                                <h1 class="carousel-title">Circle</h1>
                                <h3 class="carousel-subtitle">Register now to attend tailored events for you.</h3>
                                <h5 class="carousel-description">Scroll down to view upcoming events</h5>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img src="/static/img/slide2.jpg" class="d-block w-100" alt="...">
                        <div class="carousel-caption">
                            <div class="carousel-text-wrapper">
                                <h1 class="carousel-title">Circle</h1>
                                <h3 class="carousel-subtitle">Participate in various CCI events on campus!</h3>
                                <h5 class="carousel-description">Scroll down to view upcoming events</h5>
                            </div>
                        </div>
                    </div>
                </div>
                <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>

        <!-- Search Bar -->
        <div class="container my-4">
            <form method="GET" action="">
                <div class="input-group">
                    <input type="text" name="q" class="form-control" placeholder="Search events by title or location"
                           value="{{ request.GET.q|default:'' }}">
                    <div class="input-group-append">
                        <button class="btn btn-primary" type="submit">Search</button>
                    </div>
                </div>
            </form>
        </div>

        <!-- Events Section -->
        <div class="container my-4">
            <h2 class="text-dark mb-4">Events</h2>

            <!-- Tab Navigation -->
            <ul class="nav nav-tabs mb-3" id="eventTabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="all-tab" data-toggle="tab" href="#all" role="tab" aria-controls="all"
                       aria-selected="true">All Events</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="mindfulness-tab" data-toggle="tab" href="#mindfulness" role="tab"
                       aria-controls="mindfulness" aria-selected="false">Mindfulness & Social Events</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="career-tab" data-toggle="tab" href="#career" role="tab"
                       aria-controls="career" aria-selected="false">Career Events</a>
                </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content" id="eventTabContent">
                <!-- All Events -->
                <div class="tab-pane fade show active" id="all" role="tabpanel" aria-labelledby="all-tab">
                    <div class="row">
                        {% for event in page_obj %}
                            <div class="col-sm-6 col-md-4 mb-4">
                                <div class="card h-100 shadow-sm border-0 rounded">
                                    <img
                                            src="{{ event.photo_url|default:'https://pbs.twimg.com/profile_images/1428371752862720009/PKKG7xm1_400x400.jpg' }}"
                                            class="card-img-top rounded-top"
                                            alt="{{ event.title }}">
                                    <div class="card-body">
                                        <h5 class="card-title text-primary">{{ event.title }}</h5>
                                        <p class="text-muted mb-1">
                                            <i class="fas fa-calendar-alt"></i> {{ event.start_time }}
                                        </p>
                                        <p class="text-muted mb-2">
                                            <i class="fas fa-map-marker-alt"></i> {{ event.location }}
                                        </p>
                                        <a href="{% url 'event_detail' event.id %}"
                                           class="btn btn-outline-primary btn-sm">More Info</a>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    <!-- Pagination Controls -->
                    <div class="d-flex justify-content-center mt-4">
                        <nav aria-label="Page navigation">
                            <ul class="pagination">
                                {% if page_obj.has_previous %}
                                    <li class="page-item">
                                        <a class="page-link" href="?page={{ page_obj.previous_page_number }}"
                                           aria-label="Previous">
                                            &laquo; Previous
                                        </a>
                                    </li>
                                {% endif %}
                                {% if page_obj.has_next %}
                                    <li class="page-item">
                                        <a class="page-link" href="?page={{ page_obj.next_page_number }}"
                                           aria-label="Next">
                                            Next &raquo;
                                        </a>
                                    </li>
                                {% endif %}
                            </ul>
                        </nav>
                    </div>
                </div>

                <!-- Mindfulness Events -->
                <div class="tab-pane fade" id="mindfulness" role="tabpanel" aria-labelledby="mindfulness-tab">
                    <div class="row">
                        {% for event in mindfulness_events %}
                            <div class="col-sm-6 col-md-4 mb-4">
                                <div class="card h-100 shadow-sm border-0 rounded">
                                    <img
                                            src="{{ event.photo_url|default:'https://pbs.twimg.com/profile_images/1428371752862720009/PKKG7xm1_400x400.jpg' }}"
                                            class="card-img-top rounded-top"
                                            alt="{{ event.title }}">
                                    <div class="card-body">
                                        <h5 class="card-title text-primary">{{ event.title }}</h5>
                                        <p class="text-muted mb-1">
                                            <i class="fas fa-calendar-alt"></i> {{ event.start_time }}
                                        </p>
                                        <p class="text-muted mb-2">
                                            <i class="fas fa-map-marker-alt"></i> {{ event.location }}
                                        </p>
                                        <a href="{% url 'event_detail' event.id %}"
                                           class="btn btn-outline-primary btn-sm">More Info</a>
                                    </div>
                                </div>
                            </div>
                        {% empty %}
                            <p class="text-center">No mindfulness events found.</p>
                        {% endfor %}
                    </div>
                </div>

                <!-- Career Events -->
                <div class="tab-pane fade" id="career" role="tabpanel" aria-labelledby="career-tab">
                    <div class="row">
                        {% for event in career_events %}
                            <div class="col-sm-6 col-md-4 mb-4">
                                <div class="card h-100 shadow-sm border-0 rounded">
                                    <img
                                            src="https://pbs.twimg.com/profile_images/1428371752862720009/PKKG7xm1_400x400.jpg"
                                            class="card-img-top rounded-top"
                                            alt="{{ event.title }}">
                                    <div class="card-body">
                                        <h5 class="card-title text-primary">{{ event.title }}</h5>
                                        <p class="text-muted mb-1">
                                            <i class="fas fa-calendar-alt"></i> {{ event.start_time }}
                                        </p>
                                        <p class="text-muted mb-2">
                                            <i class="fas fa-map-marker-alt"></i> {{ event.location }}
                                        </p>
                                        <a href="{% url 'event_detail' event.id %}"
                                           class="btn btn-outline-primary btn-sm">More Info</a>
                                    </div>
                                </div>
                            </div>
                        {% empty %}
                            <p class="text-center">No career events found.</p>
                        {% endfor %}
                    </div>
                </div>
            </div>


        </div>
    </div>
{% endblock body %}
